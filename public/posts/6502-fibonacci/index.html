<!doctype html>
<html
  lang="en-us"
  dir="ltr"
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="icon" href="/icon.png">
<link
  href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Quando&family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap"
  rel="stylesheet"
/>
  <link rel="stylesheet" href="/css/solarized-light-syntax.min.f25b2306c22e988236ec5d6d2cc7943ddb13f042c694ed678e9334f0387446b0.css" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>
  6502 Assembly - Fibonacci | Ujkan Sulejmani
</title>

    <link rel="stylesheet" href="/css/main.css">
 
      <script src="/js/main.js"></script>

  <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>
 
  </head>
  <body>
    <div class="container">
      <header><h1><a href="/">Ujkan Sulejmani</a></h1>

  <nav>
    <div class="nav-container">
    <a href="/about/">ABOUT</a>
    <a aria-current="true" class="ancestor" href="/posts/">POSTS</a>
    <a href="/tags/">TAGS</a>
    </div>
  </nav>

</header>
      <main>
  <h1>6502 Assembly - Fibonacci</h1>

  
  
  <time datetime="2024-07-15T00:00:00&#43;00:00">July 15, 2024</time>

  <h1 id="introduction">Introduction</h1>
<p>I&rsquo;ve been learning some 6502 assembly
(<a href="https://www.youtube.com/@ujkansulejmani/streams">streams</a>)
and most recently I implemented a subroutine to calculate the n-th Fibonacci
number.</p>
<h1 id="what-is-6502">What is 6502?</h1>
<blockquote>
<p>The MOS Technology 6502 (typically pronounced &ldquo;sixty-five-oh-two&rdquo;)
is an 8-bit microprocessor
L</p>
</blockquote>
<p>I implemented a subroutine that calculates the n-th Fibonacci number in
6502 assembly.</p>
<p>Here&rsquo;s the code</p>
<pre tabindex="0"><code class="language-assembly" data-lang="assembly">define N_loc $01fd
define fpp_loc $01fc
define fp_loc $01fb

fib:
  TXA
  PHA             ; stores N in the stack, loc $01fd since $01fe
                  ; and $01ff are ret. address
  LDA #0          ; 1st fibonacci is 0
  PHA
  LDA #1          ; 2nd fibonacci is 1
  PHA
  LDX #2          ; loop counter; i = 2
loop:
  CPX N_loc       ; i == n?
  BEQ fibdone     ; then quit, done

  ; fp = fpp + fp
  LDA fp_loc
  ADC fpp_loc
  STA fp_loc

  ; fpp = fp - fpp
  SEC             ; set carry for subtraction
  LDA fp_loc
  SBC fpp_loc
  STA fpp_loc

  INX             ; i++
  JMP loop

fibdone:
  LDA fp_loc     ; result stored in accumulator
  RTS
</code></pre>
  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="/tags/6502/">6502</a></li>
        <li><a href="/tags/assembly/">Assembly</a></li>
    </ul>
  </div>

</main>
      <footer><p>Copyright 2024. All rights reserved.</p>
</footer>
    </div>
  </body>
</html>
